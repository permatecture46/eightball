<html>
<head>
</head>
<body>
  <svg xmlns="http://www.w3.org/2000/svg">
    <rect id="screen"/>
    <rect id="table"/>
  </svg>
</body>
<script>

  placeRandomBall();

  document.addEventListener('mousemove', function(event) {
    var location = getElementTableLocation([event.clientX, event.clientY]);
    var x = location[0];
    var y = location[1];
    if (cursorOnTable(x, y)) placePredictedCueLocation(x, y);
  });

  function cursorOnTable(cursorX, cursorY) {
    if (cursorX < 0 || cursorY < 0) {
      return true;
    }
// COMPLETE THIS FUNCTION
  }

  function placePredictedCueLocation(cursorX, cursorY) {
    var currentLocation = getElementTableLocation('cue');
    var currentX = currentLocation[0];
    var currentY = currentLocation[1];
    var predictedLocation = getPredictedLocation(currentX, currentY, cursorX, cursorY);
    var predictedX = predictedLocation[0];
    var predictedY = predictedLocation[1];
    placeBall('white', predictedX, predictedY);
  }

  function getElementTableLocationByID(id) {
    var location = document.getElementById(id).getBoundingClientRect();
    return getElementTableLocation(location);
  }

  function getElementTableLocation(location) {
    var tableLocation = document.getElementById('table').getBoundingClientRect();
    var x = location[0] - tableLocation.left;
    var y = location[1] - tableLocation.top;
    return [x, y];
  }

  function getPredictedLocation(currentX, currentY, cursorX, cursorY) {
    
  }

  function placeRandomBall(color) {
    var randomX = Math.random() * 500 + 'px';
    var randomY = Math.random() * 250 + 'px';
    placeBall('red', randomX, randomY, 'cue');
  }

  function placeBall(color, cx, cy, id) {
    appendSVG('circle', function(element) {
      element.style.fill = color || 'red';
      element.style.r = '10px';
      element.style.cx = cx;
      element.style.cy = cy;
      if (id) element.id = id;
    });
  }

  function appendSVG(type, setAttributeAndStyle) {
    var svg = document.getElementsByTagName('svg')[0];
    var newElement = document.createElementNS("http://www.w3.org/2000/svg", type);
    if (setAttributeAndStyle) setAttributeAndStyle(newElement);
    svg.appendChild(newElement);
  }

</script>
<style>
  
  svg {
    width: 800px;
    height: 400px;
    display: block;
    margin: auto;
    margin-top: 50px;
  }

  #screen {
    width: 100%;
    height: 100%;
  }

  #table {
    fill: blue;
    width: 500px;
    height: 250px;
  }

</style>
</html>
